@using NoteWebApp.Models
@{
    ViewBag.Title = "List";
    List<Note> noteList = ViewBag.noteList;
    NoteBook noteBook = ViewBag.noteBook;
    int countNotes = noteList.Count;
    var isShortcut = ViewBag.isShortCut;
    var Star = "";
    var Save = "true";

    if (isShortcut == "false")
    {
        Star = "../../Content/shortcut_stroke.png";
        Save = "true";

    }
    else if (isShortcut == "true")
    {
        Star = "../../Content/shortcut_fill.png";
        Save = "false";
    }
}

<body>

    <h2>@noteBook.Name</h2>

    <div id="noteCount">
        @Html.ActionLink("노트북 정보", "Info", new { id = noteBook.NoteBookId })
        <br /><b>@countNotes 개의 노트</b>
    </div>
    <br />
    <p id="selectlist">
        @using (Html.BeginForm("NoteList", "Note", FormMethod.Get))
        {
            @Html.DropDownList("orders", new SelectListItem[]{
            new SelectListItem() { Text = "설정", Value = ""},
            new SelectListItem() { Text = "만든날짜(오래된 순으로)", Value = "0"},
            new SelectListItem() { Text = "만든날짜(최근 순으로)", Value = "1"},
            new SelectListItem() { Text = "제목(오름차순)", Value = "2"},
            new SelectListItem() { Text = "제목(내림차순)", Value = "3"}
           }, new { onchange="Callfunc(this.value)" })
        }
    </p>

    <div class="notelist">
        @foreach (var item in noteList)
        {
            <div class="list" onclick="notedetail(@item.NoteId)">
                <ul>
                    <li>

                        <div class="listTitle">@item.Title<br /><br /></div>


                        <div class="listDate">@item.NoteDate</div>
                        <hr />
                    </li>
                </ul>
            </div>

        }

    </div>
    @*노트본문*@
    <div id="noteDetail"></div>

</body>
<script>
    var url = '@Url.Action("Detail", "Note")';
    function Callfunc(val) {
        $('.notelist').load("/Note/NoteList?order=", { order: val, noteBookid: @noteBook.NoteBookId });
    }
    function notedetail(noteid) {
        $('#noteDetail').load(url, { selectedNoteid: noteid });
    }
</script>